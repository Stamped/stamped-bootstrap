{
    "name" : "{{ name }}", 
    "stack_name": "{{ stack_name }}",
    "roles" : {{ roles }}, 
    "path" : "{{ path }}", 
    "port_base" : "{{ port_base }}", 
    "cookbook_path" : [ "pynode.cookbooks", "cookbooks", ], 
    
    "git" : {
        "repos" : [ 
            {
                "url" : "git@github.com:Stamped/Stamped.git", 
                "path" : "{{ path }}/stamped", 
            }
        ], 
    }, 
    
    "wsgi" : {
        "app" : "{{ path }}/stamped/sites/stamped.com/bin/serve.py", 
        "log" : "{{ path }}/logs/wsgi.log", 
    }, 
    
    "python" : {
        "requirements" : [
            "fabric", 
            "BeautifulSoup", 
            "boto", 
            "xlrd", 
            "pymongo", 
            "flask", 
            "gunicorn", 
            #"gevent", 
        ], 
    }, 
    
    "recipes" : [
        "stamped", 
    ], 
    
    {% if 'replSetInit' in roles %}
    {% if aws_access_key_id %}"aws_access_key_id" : "{{ aws_access_key_id }}", {% endif %}
    {% if aws_access_key_secret %} "aws_access_key_secret" : "{{ aws_access_key_secret }}", {% endif %}
    "replSet" : {{ replSet }}, 
    "populateDB" : "{{ path }}/stamped/sites/stamped.com/bin/api/SampleData.py", 
    {% endif %}
    
    {% if 'db' in roles %}
    "mongodb" : {
        "options" : [ {% if mongodb.options %} mongodb.options {% endif %} ], 
        "config" : {
            "path" : "{{ path }}/conf/mongod.conf", 
            "dbpath" : "{{ path }}/db", 
            {% if mongodb.port %}"port" : "{{ mongodb.port }}", {% endif %}
            "logpath" : "{{ path }}/logs/mongod.log", 
            "replSet" : "{{ mongodb.replSet }}", 
            "nohttpinterface" : True, 
            "journal" : True, 
            #"shardsvr" : True, 
        }, 
    }, 
    {% endif %}
}
